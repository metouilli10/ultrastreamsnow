document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".mobile-toggle"),t=document.querySelector(".nav"),o=document.querySelectorAll(".nav__link");e&&t&&e.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation(),t.classList.toggle("active"),e.classList.toggle("active");const s=t.classList.contains("active");e.setAttribute("aria-expanded",s)}),o.length>0&&t&&e&&o.forEach(o=>{o.addEventListener("click",()=>{t.classList.remove("active"),e.classList.remove("active"),e.setAttribute("aria-expanded","false")})}),document.addEventListener("click",o=>{t&&e&&t.classList.contains("active")&&(t.contains(o.target)||e.contains(o.target)||(t.classList.remove("active"),e.classList.remove("active"),e.setAttribute("aria-expanded","false")))});const s=document.querySelectorAll(".faq-item");s.forEach(e=>{e.querySelector(".faq-question").addEventListener("click",()=>{s.forEach(t=>{t!==e&&t.classList.remove("active")}),e.classList.toggle("active")})}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=document.querySelector(this.getAttribute("href"));t&&t.scrollIntoView({behavior:"smooth",block:"start"})})});const n=document.querySelector(".header");window.addEventListener("scroll",()=>{window.scrollY>50?n.classList.add("scrolled"):n.classList.remove("scrolled")});const a=document.getElementById("pricing-toggle"),c=document.querySelectorAll(".pricing-card .amount"),l=document.querySelectorAll(".device-count"),r={standard:{"plan-3m-standard":"https://whop.com/checkout/plan_Q29B5E7eJz3PN","plan-6m-standard":"https://whop.com/checkout/plan_Gi5lQlDHOUxjg","plan-12m-standard":"https://whop.com/checkout/plan_uIYGKgusOd8AU","plan-24m-standard":"https://whop.com/checkout/plan_xLkcMohmfySKW"},premium:{"plan-3m-standard":"https://whop.com/checkout/plan_aDDDqiRSrx1CY","plan-6m-standard":"https://whop.com/checkout/plan_2fwGhs5ljPX7H","plan-12m-standard":"https://whop.com/checkout/plan_NavsyxHQWpJrm","plan-24m-standard":"https://whop.com/checkout/plan_N1mXKsxTBefgg"}};a&&a.addEventListener("change",function(){const e=this.checked;c.forEach(t=>{t.textContent=e?t.dataset.premium:t.dataset.standard}),l.forEach(t=>{e?(t.textContent="Works on 2 Devices",t.style.color="var(--color-accent)",t.style.fontWeight="700"):(t.textContent="Works on 1 Device",t.style.color="",t.style.fontWeight="")});const t=e?r.premium:r.standard;Object.keys(t).forEach(e=>{const o=document.getElementById(e);o&&(o.href=t[e])})});const i=document.getElementById("trialForm");i&&i.addEventListener("submit",async function(e){e.preventDefault();const t=document.getElementById("submitBtn"),o=document.getElementById("form-message"),s=t.innerHTML;t.disabled=!0,t.innerHTML="⏳ Submitting...",o.style.display="none";const n=new FormData(i);try{const e=await fetch("https://api.web3forms.com/submit",{method:"POST",body:n}),t=await e.json();if(!t.success)throw new Error(t.message||"Submission failed");o.style.display="block",o.style.backgroundColor="#10b981",o.style.color="#fff",o.textContent="✅ Success! Your free trial request has been submitted. Check your email for login credentials!",i.reset(),o.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(e){o.style.display="block",o.style.backgroundColor="#ef4444",o.style.color="#fff",o.textContent="❌ Error: "+(e.message||"Failed to submit. Please try again or contact support."),o.scrollIntoView({behavior:"smooth",block:"nearest"})}finally{t.disabled=!1,t.innerHTML=s}});const d=document.getElementById("contactForm");d&&d.addEventListener("submit",async function(e){e.preventDefault();const t=document.getElementById("contactSubmitBtn"),o=document.getElementById("contact-form-message"),s=t.innerHTML;t.disabled=!0,t.innerHTML="⏳ Sending...",o.style.display="none";const n=new FormData(d);try{const e=await fetch("https://api.web3forms.com/submit",{method:"POST",body:n}),t=await e.json();if(!t.success)throw new Error(t.message||"Submission failed");o.style.display="block",o.style.backgroundColor="#10b981",o.style.color="#fff",o.textContent="✅ Thank you! Your message has been sent successfully. We will get back to you within 24 hours.",d.reset(),o.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(e){o.style.display="block",o.style.backgroundColor="#ef4444",o.style.color="#fff",o.textContent="❌ Error: "+(e.message||"Failed to send message. Please try again or contact us directly at support@ultrastreamnow.com"),o.scrollIntoView({behavior:"smooth",block:"nearest"})}finally{t.disabled=!1,t.innerHTML=s}});const m=document.getElementById("resellerForm");m&&m.addEventListener("submit",async function(e){e.preventDefault();const t=document.getElementById("resellerSubmitBtn"),o=document.getElementById("reseller-form-message"),s=t.innerHTML;t.disabled=!0,t.innerHTML="⏳ Submitting Application...",o.style.display="none";const n=new FormData(m);try{const e=await fetch("https://api.web3forms.com/submit",{method:"POST",body:n}),t=await e.json();if(!t.success)throw new Error(t.message||"Submission failed");o.style.display="block",o.style.backgroundColor="#10b981",o.style.color="#fff",o.textContent="✅ Success! Your reseller application has been submitted. Our team will review it and get back to you soon!",m.reset(),o.scrollIntoView({behavior:"smooth",block:"nearest"})}catch(e){o.style.display="block",o.style.backgroundColor="#ef4444",o.style.color="#fff",o.textContent="❌ Error: "+(e.message||"Failed to submit application. Please try again or contact us directly."),o.scrollIntoView({behavior:"smooth",block:"nearest"})}finally{t.disabled=!1,t.innerHTML=s}})});